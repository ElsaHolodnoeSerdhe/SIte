<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>РП Бот - Полное руководство</title>
    <style>
        :root {
            /* Светлая тема */
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            --secondary: #f43f5e;
            --text-color: #1e293b;
            --bg-color: #f1f5f9;
            --card-bg: rgba(255, 255, 255, 0.96);
            --border-color: rgba(0, 0, 0, 0.1);
            --gray-light: #e2e8f0;
            --btn-outline-color: #e2e8f0;
            --btn-outline-text: #1e293b;
            --success: #10b981;
            --danger: #ef4444;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Темная тема */
        [data-theme="dark"] {
            --primary: #818cf8;
            --primary-dark: #6366f1;
            --primary-light: #a5b4fc;
            --text-color: #f8fafc;
            --bg-color: #0f172a;
            --card-bg: rgba(15, 23, 42, 0.96);
            --border-color: rgba(255, 255, 255, 0.1);
            --gray-light: #1e293b;
            --btn-outline-color: #334155;
            --btn-outline-text: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .btn-outline {
            background: var(--btn-outline-color);
            color: var(--btn-outline-text);
            border: 1px solid var(--border-color);
        }

        /* Уведомления */
        .notification {
            background: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }



        [data-theme="dark"] .theme-toggle::after {
            transform: translateX(24px);
        }
        

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f1f5f9;
            color: var(--dark);
            line-height: 1.6;
        }

        /* Кнопка авторизации */
        .auth-btn-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 12px;
        }

        .auth-btn {
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
            border: none;
            outline: none;
        }

        .btn-register {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-register:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Блок пользователя */
        .user-profile {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            border-radius: 50px;
            background: white;
            box-shadow: var(--shadow);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: right center;
        }

        .user-profile:hover {
            box-shadow: var(--shadow-lg);
            transform: scale(1.05);
            background: linear-gradient(135deg, #f8fafc, #ffffff);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid var(--primary-light);
        }

        .user-profile:hover .user-avatar {
            transform: rotate(15deg) scale(1.1);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .user-profile:hover .user-avatar img {
            transform: scale(1.1);
        }

        .user-name {
            font-weight: 500;
            color: var(--dark);
            transition: all 0.3s ease;
        }

        .user-profile:hover .user-name {
            color: var(--primary-dark);
            transform: translateX(5px);
        }

        .logout-btn {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 10px;
            padding: 8px 16px;
            background: white;
            color: var(--danger);
            border: 1px solid var(--gray-light);
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow);
            white-space: nowrap;
            transform: translateY(-10px);
        }

        .user-profile:hover .logout-btn {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .logout-btn:hover {
            background: #fff5f5;
            transform: translateY(0) scale(1.05);
        }

        /* Модальные окна */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 16px;
            width: 90%;
            max-width: 420px;
            padding: 32px;
            box-shadow: var(--shadow-xl);
            transform: translateY(20px) scale(0.95);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid var(--gray-light);
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 28px;
        }

        .modal-header h2 {
            color: var(--primary-dark);
            margin-bottom: 8px;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .modal-header p {
            color: var(--gray);
            font-size: 0.95rem;
        }

        /* Формы */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 0.95rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--gray-light);
            border-radius: 10px;
            background: white;
            color: var(--dark);
            font-size: 1rem;
            transition: all 0.2s;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
            outline: none;
        }

        .form-actions {
            display: flex;
            gap: 12px;
            margin-top: 28px;
        }

        .btn {
            flex: 1;
            padding: 14px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-size: 0.95rem;
            border: none;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-outline {
            background: white;
            color: var(--dark);
            border: 1px solid var(--gray-light);
            box-shadow: var(--shadow);
        }

        .btn-outline:hover {
            background: var(--gray-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .error-message {
            color: var(--danger);
            font-size: 0.85rem;
            margin-top: 6px;
            display: none;
            animation: fadeIn 0.3s;
        }

        /* Окно подтверждения email */
        .confirmation-step {
            display: none;
        }

        .confirmation-step.active {
            display: block;
        }

        .timer {
            color: var(--gray);
            margin: 15px 0;
            text-align: center;
            font-size: 0.9rem;
        }

        #resendBtn {
            background: white;
            color: var(--dark);
            border: 1px solid var(--gray-light);
        }

        #resendBtn:hover {
            background: var(--gray-light);
        }

        /* Уведомления */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 16px 20px;
            border-radius: 12px;
            box-shadow: var(--shadow-xl);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 11000;
            max-width: 320px;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .notification-success .notification-icon {
            background: var(--success);
            color: white;
        }

        .notification-info .notification-icon {
            background: var(--primary);
            color: white;
        }

        .notification-warning .notification-icon {
            background: var(--secondary);
            color: white;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }

        .notification-message {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            margin-left: 8px;
        }

        /* Анимации */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
    </style>
</style>
    <style>
        :root {
            --primary: #5181B8;
            --secondary: #5E81A8;
            --telegram: #2AABEE;
            --dark: #22313F;
            --light: #F9F9F9;
            --text: #222222;
            --success: #4BB34B;
            --warning: #FFA000;
            --info: #2196F3;
            --danger: #E53935;
            
            --bg-color: #F9F9F9;
            --text-color: #222222;
            --card-bg: #FFFFFF;
            --card-shadow: 0 2px 8px rgba(0,0,0,0.05);
            --border-color: #eee;
        }
        
        .dark-mode {
            --primary: #6B9BD2;
            --secondary: #7A9FC8;
            --telegram: #2AABEE;
            --dark: #E0E0E0;
            --light: #1E1E1E;
            --text: #E0E0E0;
            --success: #5CC35C;
            --warning: #FFB740;
            --info: #42A5F5;
            --danger: #EF5350;
            
            --bg-color: #121212;
            --text-color: #E0E0E0;
            --card-bg: #1E1E1E;
            --card-shadow: 0 2px 8px rgba(0,0,0,0.3);
            --border-color: #333;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 0;
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem 1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .header-subtitle {
            margin-top: 0.5rem;
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .platform-indicator {
            background: var(--telegram);
            color: white;
            padding: 0.3rem 0.6rem;
            font-size: 0.75rem;
            border-radius: 12px;
            margin-left: 0.5rem;
            display: inline-block;
            vertical-align: middle;
            font-weight: 500;
        }
        
        .container {
            max-width: 800px;
            padding: 0 1.5rem;
            margin: 0 auto;
            padding-bottom: 100px;
        }
        
        .version-badge {
            background: var(--warning);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            display: inline-block;
            margin-left: 0.5rem;
            vertical-align: middle;
        }
        
        /* Кнопка поиска */
        .search-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 90;
            transition: all 0.3s;
        }
        
        .search-btn:hover {
            transform: scale(1.1);
        }
        
        /* Модальное окно поиска */
        .search-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .search-modal.active {
            display: flex;
            opacity: 1;
        }
        
        .search-modal-content {
            background: var(--card-bg);
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 5px 30px rgba(0,0,0,0.3);
            transform: translateY(20px);
            transition: transform 0.3s;
        }
        
        .search-modal.active .search-modal-content {
            transform: translateY(0);
        }
        
        .search-modal-header {
            padding: 1rem;
            background: var(--primary);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .search-modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .search-modal-body {
            padding: 1rem;
        }
        
        .search-modal-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 1rem;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .search-results {
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .search-result-item {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .search-result-item:hover {
            background: rgba(81, 129, 184, 0.1);
        }
        
        .search-result-category {
            font-size: 0.8rem;
            color: var(--primary);
            margin-bottom: 0.3rem;
        }
        
        .search-result-empty {
            padding: 2rem;
            text-align: center;
            color: var(--text-color);
            opacity: 0.7;
        }
        
        /* Основные стили */
        .intro-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--info);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        
        .intro-text {
            margin-bottom: 1rem;
            color: var(--text-color);
            opacity: 0.9;
        }
        
        .section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: var(--card-shadow);
            transition: background-color 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 1.2rem;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
            scroll-margin-top: 120px;
        }
        
        h3 {
            margin: 1.5rem 0 0.8rem;
            color: var(--secondary);
            font-size: 1.2rem;
            padding-left: 0.5rem;
            border-left: 3px solid var(--secondary);
        }
        
        .command {
            background: var(--light);
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
            word-break: break-word;
            transition: all 0.3s ease;
        }
        
        .command:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .command-name {
            font-weight: 700;
            color: var(--dark);
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .command-desc {
            margin-top: 0.5rem;
            color: var(--text-color);
            opacity: 0.9;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .command-usage {
            font-size: 0.85rem;
            color: var(--text-color);
            opacity: 0.8;
            margin-top: 0.3rem;
            font-style: italic;
        }
        
        .example {
            display: block;
            background: rgba(0,0,0,0.05);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 0.8rem 0;
            font-size: 0.9rem;
            width: 100%;
            overflow-x: auto;
            border-left: 3px solid var(--primary);
            color: var(--text-color);
            transition: background-color 0.3s;
        }
        
        .dark-mode .example {
            background: rgba(255,255,255,0.1);
        }
        
        .result {
            display: block;
            margin-top: 0.5rem;
            color: var(--success);
            font-style: italic;
            font-size: 0.9rem;
            padding-left: 1rem;
            border-left: 2px solid var(--success);
        }
        
        .note {
            background-color: rgba(255, 160, 0, 0.1);
            border-left: 4px solid var(--warning);
            padding: 0.8rem 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            font-size: 0.9rem;
            color: var(--text-color);
        }
        
        .dark-mode .note {
            background-color: rgba(255, 160, 0, 0.2);
        }
        
        .tip {
            background-color: rgba(33, 150, 243, 0.1);
            border-left: 4px solid var(--info);
            padding: 0.8rem 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            font-size: 0.9rem;
            color: var(--text-color);
        }
        
        .dark-mode .tip {
            background-color: rgba(33, 150, 243, 0.2);
        }
        
        .tab-container {
            display: flex;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            background: var(--card-bg);
            position: sticky;
            top: 60px;
            z-index: 90;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: background-color 0.3s;
        }
        
        .tab-container::-webkit-scrollbar {
            display: none;
        }
        
        .tab {
            padding: 1rem 1.2rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            font-size: 0.95rem;
            font-weight: 500;
            flex-shrink: 0;
            transition: all 0.2s;
            color: var(--text-color);
        }
        
        .tab:hover {
            background-color: rgba(81, 129, 184, 0.1);
        }
        
        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .copy-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 0.8rem;
            font-size: 0.9rem;
            width: 100%;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .copy-btn:hover {
            background: #3a6ea5;
            transform: translateY(-2px);
        }
        
        .copy-btn:active {
            transform: translateY(0);
        }
        
        /* FAQ */
        .faq-item {
            margin-bottom: 0.5rem;
            border-radius: 8px;
            overflow: hidden;
            background: var(--light);
            transition: all 0.3s;
        }
        
        .dark-mode .faq-item {
            background: rgba(255,255,255,0.05);
        }
        
        .faq-question {
            padding: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
        }
        
        .faq-icon {
            transition: transform 0.3s;
        }
        
        .faq-answer {
            padding: 0 1rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }
        
        .faq-item.active .faq-answer {
            padding: 0 1rem 1rem;
            max-height: 500px;
        }
        
        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }
        
        .user-mention {
            color: var(--primary);
            font-weight: 500;
            background: rgba(81, 129, 184, 0.1);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
        }
        
        footer {
            text-align: center;
            margin: 2rem 0;
            color: var(--text-color);
            opacity: 0.7;
            font-size: 0.85rem;
            padding: 0 1.5rem;
        }
        
        /* Виджет сообщений ВК */
        .vk-msg-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 999;
        }
        
        /* Сообщение о копировании */
        .copied-message {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success);
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.95rem;
            box-shadow: 0 3px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .copied-message.visible {
            opacity: 1;
        }
        
        /* Кнопка переключения темы */
        .theme-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
            transition: all 0.3s;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        .theme-toggle svg {
            width: 24px;
            height: 24px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }
            
            .section, .intro-section {
                padding: 1.2rem;
            }
            
            h2 {
                font-size: 1.3rem;
            }
            
            .theme-toggle, .search-btn {
                width: 45px;
                height: 45px;
                bottom: 15px;
            }
            
            .search-btn {
                bottom: 75px;
            }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body> {
    background-color: var(--bg-color);
    color: var(--text-color);
}
.modal-content {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
}
    <!-- Кнопка переключения темы -->
    <button class="theme-toggle" id="themeToggle">
        <svg id="themeIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </button>

    <!-- Кнопка поиска -->
    <button class="search-btn" id="searchBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
    </button>

    <!-- Шапка сайта -->
    <header>
        <h1>🎭 РП Бот <span id="platformIndicator" class="platform-indicator">Telegram</span><span class="version-badge">v1.4</span></h1>
        <p class="header-subtitle">Полное руководство по всем командам и возможностям</p>
    </header>

    <body>
    <!-- Кнопка авторизации -->
    <div class="auth-btn-container" id="authContainer">
        <!-- Будет заполнено скриптом -->
    </div>

    <!-- Модальное окно регистрации -->
    <div class="modal-overlay" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Создайте аккаунт</h2>
                <p>Зарегистрируйтесь, чтобы получить доступ ко всем функциям</p>
            </div>
            <form id="registrationForm">
                <div class="form-group">
                    <label for="email">Электронная почта</label>
                    <input type="email" id="email" class="form-control" placeholder="example@mail.com" required>
                    <div class="error-message" id="emailError">Пожалуйста, введите корректный email</div>
                </div>
                <div class="form-group">
                    <label for="nickname">Ваш никнейм</label>
                    <input type="text" id="nickname" class="form-control" placeholder="Придумайте уникальный ник" required>
                    <div class="error-message" id="nicknameError">Ник должен быть от 3 до 20 символов</div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal()">Отмена</button>
                    <button type="submit" class="btn btn-primary">Зарегистрироваться</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Контейнер для уведомлений -->
    <div id="notificationContainer"></div>

    <script>
        // Переключение темы
document.getElementById('themeToggle').addEventListener('click', function() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
});

// Проверка сохраненной темы при загрузке
const savedTheme = localStorage.getItem('theme') || 'light';
document.documentElement.setAttribute('data-theme', savedTheme);
        
        // Система пользователя
        const UserSystem = {
            currentUser: JSON.parse(localStorage.getItem('rpBotUser')) || null,
            
            init: function() {
                this.renderAuthButton();
                
                // Показываем приветственное уведомление для новых пользователей
                if (!this.currentUser) {
                    setTimeout(() => {
                        this.showNotification('info', 'Добро пожаловать!', 'Зарегистрируйтесь для доступа ко всем функциям');
                    }, 2000);
                }
            },
            
            renderAuthButton: function() {
                const authContainer = document.getElementById('authContainer');
                authContainer.innerHTML = '';
                
                if (this.currentUser) {
                    // Показываем кнопку с аватаром пользователя
                    const avatarLetter = this.currentUser.nickname.charAt(0).toUpperCase();
                    
                    const userBtn = document.createElement('button');
                    userBtn.className = 'auth-btn btn-user';
                    userBtn.innerHTML = `
                        <div class="user-avatar">${avatarLetter}</div>
                        <span>${this.currentUser.nickname}</span>
                    `;
                    userBtn.onclick = () => this.logout();
                    
                    authContainer.appendChild(userBtn);
                } else {
                    // Показываем кнопку регистрации
                    const registerBtn = document.createElement('button');
                    registerBtn.className = 'auth-btn btn-register';
                    registerBtn.innerHTML = `
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                        <span>Регистрация</span>
                    `;
                    registerBtn.onclick = () => this.openRegistrationModal();
                    
                    authContainer.appendChild(registerBtn);
                }
            },
            
            openRegistrationModal: function() {
                document.getElementById('authModal').classList.add('active');
                document.getElementById('email').focus();
            },
            
            closeRegistrationModal: function() {
                document.getElementById('authModal').classList.remove('active');
                // Сбрасываем ошибки
                document.getElementById('emailError').style.display = 'none';
                document.getElementById('nicknameError').style.display = 'none';
            },
            
            register: function(email, nickname) {
                // Валидация
                if (!this.validate(email, nickname)) return false;
                
                // Создаем пользователя
                this.currentUser = {
                    email: email,
                    nickname: nickname,
                    registeredAt: new Date().toISOString()
                };
                
                // Сохраняем в localStorage
                localStorage.setItem('rpBotUser', JSON.stringify(this.currentUser));
                
                // Обновляем интерфейс
                this.renderAuthButton();
                this.closeRegistrationModal();
                
                // Показываем уведомление
                this.showNotification('success', 'Добро пожаловать!', `Аккаунт ${nickname} успешно создан`);
                
                return true;
            },
            
            validate: function(email, nickname) {
                let isValid = true;
                const emailError = document.getElementById('emailError');
                const nicknameError = document.getElementById('nicknameError');
                
                // Сбрасываем ошибки
                emailError.style.display = 'none';
                nicknameError.style.display = 'none';
                
                // Проверка email
                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    emailError.style.display = 'block';
                    isValid = false;
                }
                
                // Проверка ника
                if (nickname.length < 3 || nickname.length > 20) {
                    nicknameError.style.display = 'block';
                    isValid = false;
                }
                
                if (!isValid) {
                    // Анимация тряски
                    const modalContent = document.querySelector('.modal-content');
                    modalContent.style.animation = 'shake 0.4s';
                    setTimeout(() => {
                        modalContent.style.animation = '';
                    }, 400);
                }
                
                return isValid;
            },
            
            logout: function() {
                this.currentUser = null;
                localStorage.removeItem('rpBotUser');
                this.renderAuthButton();
                this.showNotification('info', 'Вы вышли из системы', 'Ваши данные сохранены');
                
                // Через 3 секунды снова предлагаем зарегистрироваться
                setTimeout(() => {
                    this.showNotification('info', 'Вернитесь в любое время', 'Зарегистрируйтесь для доступа ко всем функциям');
                }, 3000);
            },
            
            showNotification: function(type, title, message) {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                    <div class="notification-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            ${type === 'success' ? '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>' : ''}
                            ${type === 'info' ? '<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>' : ''}
                            ${type === 'warning' ? '<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>' : ''}
                        </svg>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${title}</div>
                        <div class="notification-message">${message}</div>
                    </div>
                    <button class="notification-close">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                `;
                
                container.appendChild(notification);
                
                // Показываем уведомление
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);
                
                // Закрытие по кнопке
                notification.querySelector('.notification-close').addEventListener('click', () => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                });
                
                // Автоматическое закрытие через 5 секунд
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.classList.remove('show');
                        setTimeout(() => {
                            notification.remove();
                        }, 300);
                    }
                }, 5000);
            }
        };

        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            UserSystem.init();
            
            // Обработка формы регистрации
            document.getElementById('registrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('email').value.trim();
                const nickname = document.getElementById('nickname').value.trim();
                UserSystem.register(email, nickname);
            });
        });
        
        function closeModal() {
            UserSystem.closeRegistrationModal();
        }
    </script>
    
    <!-- Навигационные вкладки -->
    <div class="tab-container">
        <div class="tab active" onclick="openTab('commands')">📋 Основные</div>
        <div class="tab" onclick="openTab('emotions')">🎭 Эмоции</div>
        <div class="tab" onclick="openTab('actions')">🤝 Действия</div>
        <div class="tab" onclick="openTab('news')">📰 Новости</div>
        <div class="tab" onclick="openTab('faq')">❓ FAQ</div>
    </div>
    
    <!-- Основное содержимое -->
    <div class="container">
        <div class="intro-section">
            <h2>👋 Добро пожаловать в руководство по РП боту v1.4</h2>
            <p class="intro-text">Это полное руководство по всем командам и возможностям бота для ролевых игр.</p>
            <p class="intro-text">Используйте кнопку поиска внизу экрана для быстрого поиска команд.</p>
        </div>

<div class="auth-btn-container" id="authContainer">
        <!-- Будет заполнено скриптом -->
    </div>

    <!-- Модальное окно регистрации -->
    <div class="modal-overlay" id="authModal">
        <div class="modal-content">
            <!-- Шаг 1: Регистрация -->
            <div id="registerStep" class="confirmation-step active">
                <div class="modal-header">
                    <h2>Создайте аккаунт</h2>
                    <p>Зарегистрируйтесь, чтобы получить доступ ко всем функциям</p>
                </div>
                <form id="registrationForm">
                    <div class="form-group">
                        <label for="email">Электронная почта</label>
                        <input type="email" id="email" class="form-control" placeholder="example@mail.com" required>
                        <div class="error-message" id="emailError">Пожалуйста, введите корректный email</div>
                    </div>
                    <div class="form-group">
                        <label for="nickname">Ваш никнейм</label>
                        <input type="text" id="nickname" class="form-control" placeholder="Придумайте уникальный ник" required>
                        <div class="error-message" id="nicknameError">Ник должен быть от 3 до 20 символов</div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeModal()">Отмена</button>
                        <button type="submit" class="btn btn-primary">Зарегистрироваться</button>
                    </div>
                </form>
            </div>

            <!-- Шаг 2: Подтверждение email -->
            <div id="confirmStep" class="confirmation-step">
                <div class="modal-header">
                    <h2>Подтвердите email</h2>
                    <p>Мы отправили 6-значный код на вашу почту</p>
                </div>
                <div class="form-group">
                    <input type="text" id="codeInput" class="form-control" placeholder="Введите код" maxlength="6" required>
                    <div class="error-message" id="codeError">Неверный код подтверждения</div>
                </div>
                <button class="btn btn-primary" onclick="verifyCode()">Подтвердить</button>
                <div class="timer">
                    Можно запросить новый код через: <span id="countdown">60</span> сек.
                </div>
                <button id="resendBtn" class="btn btn-outline" onclick="resendCode()" disabled>Отправить код повторно</button>
            </div>

            <!-- Шаг 3: Успешная регистрация -->
            <div id="successStep" class="confirmation-step">
                <div class="modal-header">
                    <h2>✅ Регистрация завершена!</h2>
                    <p>Ваш аккаунт успешно создан и готов к использованию.</p>
                </div>
                <button class="btn btn-primary" onclick="finishRegistration()">Продолжить</button>
            </div>
        </div>
    </div>

    <!-- Контейнер для уведомлений -->
    <div id="notificationContainer"></div>

    <script>
        // Система пользователя
        const UserSystem = {
            currentUser: JSON.parse(localStorage.getItem('rpBotUser')) || null,
            verificationCode: "",
            countdown: 60,
            countdownInterval: null,
            
            init: function() {
                this.renderAuthButton();
                
                if (!this.currentUser) {
                    setTimeout(() => {
                        this.showNotification('info', 'Добро пожаловать!', 'Зарегистрируйтесь для доступа ко всем функциям');
                    }, 2000);
                }
            },
            
            renderAuthButton: function() {
                const authContainer = document.getElementById('authContainer');
                authContainer.innerHTML = '';
                
                if (this.currentUser) {
                    const userProfile = document.createElement('div');
                    userProfile.className = 'user-profile';
                    userProfile.innerHTML = `
                        <div class="user-avatar">
                            <img src="https://i.imgur.com/3Jx7T8y.png" alt="Аватар">
                        </div>
                        <span class="user-name">${this.currentUser.nickname}</span>
                        <button class="logout-btn" onclick="UserSystem.logout()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            Выйти
                        </button>
                    `;
                    authContainer.appendChild(userProfile);
                } else {
                    const registerBtn = document.createElement('button');
                    registerBtn.className = 'auth-btn btn-register';
                    registerBtn.innerHTML = `
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="8.5" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                        <span>Регистрация</span>
                    `;
                    registerBtn.onclick = () => this.openRegistrationModal();
                    authContainer.appendChild(registerBtn);
                }
            },
            
            openRegistrationModal: function() {
                document.getElementById('authModal').classList.add('active');
                document.getElementById('registerStep').classList.add('active');
                document.getElementById('confirmStep').classList.remove('active');
                document.getElementById('successStep').classList.remove('active');
                document.getElementById('email').focus();
            },
            
            closeRegistrationModal: function() {
                document.getElementById('authModal').classList.remove('active');
                clearInterval(this.countdownInterval);
            },
            
            register: function(email, nickname) {
                if (!this.validate(email, nickname)) return false;
                
                this.currentUser = {
                    email: email,
                    nickname: nickname,
                    registeredAt: new Date().toISOString(),
                    avatar: "https://i.imgur.com/3Jx7T8y.png",
                    emailVerified: false
                };
                
                // Переходим к подтверждению email
                this.sendVerificationCode(email);
                return true;
            },
            
            validate: function(email, nickname) {
                let isValid = true;
                const emailError = document.getElementById('emailError');
                const nicknameError = document.getElementById('nicknameError');
                
                emailError.style.display = 'none';
                nicknameError.style.display = 'none';
                
                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    emailError.style.display = 'block';
                    isValid = false;
                }
                
                if (nickname.length < 3 || nickname.length > 20) {
                    nicknameError.style.display = 'block';
                    isValid = false;
                }
                
                if (!isValid) {
                    const modalContent = document.querySelector('.modal-content');
                    modalContent.style.animation = 'shake 0.4s';
                    setTimeout(() => {
                        modalContent.style.animation = '';
                    }, 400);
                }
                
                return isValid;
            },
            
            sendVerificationCode: async function(email) {
                try {
                    // Генерация 6-значного кода
                    this.verificationCode = Math.floor(100000 + Math.random() * 900000);
                    
                    // Отправка через FormSubmit
                    const response = await fetch(`https://formsubmit.co/ajax/${encodeURIComponent(email)}`, {
                        method: "POST",
                        headers: { 
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify({
                            _subject: `Код подтверждения: ${this.verificationCode}`,
                            _autoresponse: `Ваш код подтверждения: ${this.verificationCode}\n\nНикому не сообщайте этот код!`,
                            _template: "table",
                            _priority: "high"
                        })
                    });

                    const data = await response.json();
                    
                    if (data.success) {
                        // Переход к шагу подтверждения
                        document.getElementById('registerStep').classList.remove('active');
                        document.getElementById('confirmStep').classList.add('active');
                        this.startCountdown();
                        this.showNotification('success', 'Код отправлен', `Мы отправили код на ${email}`);
                    } else {
                        throw new Error("Ошибка отправки кода");
                    }
                } catch (error) {
                    this.showNotification('warning', 'Ошибка', 'Не удалось отправить код подтверждения');
                }
            },
            
            verifyCode: function() {
                const enteredCode = document.getElementById('codeInput').value;
                const codeError = document.getElementById('codeError');
                
                if (enteredCode === this.verificationCode.toString()) {
                    codeError.style.display = 'none';
                    
                    // Подтверждаем email
                    this.currentUser.emailVerified = true;
                    localStorage.setItem('rpBotUser', JSON.stringify(this.currentUser));
                    
                    // Переход к шагу успешной регистрации
                    document.getElementById('confirmStep').classList.remove('active');
                    document.getElementById('successStep').classList.add('active');
                    clearInterval(this.countdownInterval);
                    
                    this.showNotification('success', 'Успешно', 'Ваш email подтвержден!');
                } else {
                    codeError.style.display = 'block';
                }
            },
            
            resendCode: function() {
                clearInterval(this.countdownInterval);
                this.sendVerificationCode(this.currentUser.email);
            },
            
            startCountdown: function() {
                const countdownElement = document.getElementById('countdown');
                const resendBtn = document.getElementById('resendBtn');
                
                this.countdown = 60;
                countdownElement.textContent = this.countdown;
                resendBtn.disabled = true;

                this.countdownInterval = setInterval(() => {
                    this.countdown--;
                    countdownElement.textContent = this.countdown;
                    
                    if (this.countdown <= 0) {
                        clearInterval(this.countdownInterval);
                        resendBtn.disabled = false;
                        countdownElement.textContent = "0";
                    }
                }, 1000);
            },
            
            finishRegistration: function() {
                this.closeRegistrationModal();
                this.renderAuthButton();
                this.showNotification('success', 'Добро пожаловать!', `Рады видеть вас, ${this.currentUser.nickname}!`);
            },
            
            logout: function() {
                this.currentUser = null;
                localStorage.removeItem('rpBotUser');
                this.renderAuthButton();
                this.showNotification('info', 'Вы вышли из системы', 'Ваши данные сохранены');
                
                setTimeout(() => {
                    this.showNotification('info', 'Вернитесь в любое время', 'Зарегистрируйтесь для доступа ко всем функциям');
                }, 3000);
            },
            
            showNotification: function(type, title, message) {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                    <div class="notification-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            ${type === 'success' ? '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>' : ''}
                            ${type === 'info' ? '<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>' : ''}
                            ${type === 'warning' ? '<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>' : ''}
                        </svg>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${title}</div>
                        <div class="notification-message">${message}</div>
                    </div>
                    <button class="notification-close">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                `;
                
                container.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);
                
                notification.querySelector('.notification-close').addEventListener('click', () => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                });
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.classList.remove('show');
                        setTimeout(() => {
                            notification.remove();
                        }, 300);
                    }
                }, 5000);
            }
        };

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            UserSystem.init();
            
            document.getElementById('registrationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('email').value.trim();
                const nickname = document.getElementById('nickname').value.trim();
                UserSystem.register(email, nickname);
            });
        });
        
        // Глобальные функции
        function closeModal() {
            UserSystem.closeRegistrationModal();
        }
        
        function verifyCode() {
            UserSystem.verifyCode();
        }
        
        function resendCode() {
            UserSystem.resendCode();
        }
        
        function finishRegistration() {
            UserSystem.finishRegistration();
        }
    </script>
        
        <!-- Основные команды -->
        <div id="commands" class="tab-content active">
            <div class="section">
                <h2>📋 Основные команды</h2>
                <p>Эти команды позволяют настроить бота и управлять базовыми функциями.</p>
                
                <div class="command" data-category="Основные" data-search="start начало старт">
                    <div class="command-name">/start</div>
                    <div class="command-desc">Начальное приветствие и краткая инструкция по использованию бота. Показывает основные возможности и правила использования.</div>
                    <div id="vk-start-note" class="note" style="display: none;">
                        <strong>Примечание для ВКонтакте:</strong> В мобильном приложении VK вместо команды /start нужно нажать кнопку "Начать" в диалоге с ботом.
                    </div>
                </div>
                
                <div class="command" data-category="Основные" data-search="setnick установить ник смена ника nickname">
                    <div class="command-name">/setnick [никнейм]</div>
                    <div class="command-desc">Устанавливает ваш ролевой никнейм, который будет отображаться при использовании команд. Поддерживает любые языки.</div>
                    <div class="command-usage">Максимальная длина ника - 32 символа. Можно использовать пробелы и большинство специальных символов.</div>
                    <span class="example">/setnick Тёмный_Лорд</span>
                    <span class="result">→ Ваш ник успешно установлен: Тёмный_Лорд</span>
                    <button class="copy-btn" onclick="copyToClipboard('/setnick ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать команду
                    </button>
                </div>
                
                <div class="command" data-category="Основные" data-search="nick никнейм текущий ник мой ник">
                    <div class="command-name">/nick</div>
                    <div class="command-desc">Показывает ваш текущий установленный никнейм. Если ник не установлен, будет показано ваше имя из профиля.</div>
                    <span class="example">/nick</span>
                    <span class="result">→ Ваш текущий ник: Тёмный_Лорд</span>
                    <button class="copy-btn" onclick="copyToClipboard('/nick')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать команду
                    </button>
                </div>
                
                <div class="command" data-category="Основные" data-search="commands команды список команд помощь help">
                    <div class="command-name">/commands</div>
                    <div class="command-desc">Показывает список всех доступных команд бота с краткими описаниями.</div>
                    <button class="copy-btn" onclick="copyToClipboard('/commands')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать команду
                    </button>
                </div>
                
                <div class="tip">
                    💡 <strong>Совет:</strong> Вы можете в любой момент изменить свой никнейм, просто снова используя команду /setnick. Старый ник будет автоматически заменён на новый.
                </div>
            </div>
        </div>
        
        <!-- Эмоции -->
        <div id="emotions" class="tab-content">
            <div class="section">
                <h2>🎭 Эмоции и жесты</h2>
                <p>Эти префиксы позволяют выражать эмоции и настроение вашего персонажа. Добавьте их в начало сообщения.</p>
                
                <div class="command" data-category="Эмоции" data-search="!!!! крик кричать громко важно">
                    <div class="command-name">!!!!</div>
                    <div class="command-desc">Используется для громких, важных или эмоциональных сообщений. Показывает, что ваш персонаж кричит или говорит очень выразительно.</div>
                    <span class="example">!!!! Внимание всем жителям замка!</span>
                    <span class="result">→ Тёмный_Лорд (❗ говорит что-то важное): Внимание всем жителям замка!</span>
                    <div class="note">
                        <strong>Примечание:</strong> Не злоупотребляйте этой эмоцией, чтобы не создавать лишнего шума в чате.
                    </div>
                    <button class="copy-btn" onclick="copyToClipboard('!!!! ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="command" data-category="Эмоции" data-search="???? вопрос вопрос недоумение">
                    <div class="command-name">????</div>
                    <div class="command-desc">Показывает, что ваш персонаж задаёт вопрос или выражает недоумение. Отлично подходит для диалогов.</div>
                    <span class="example">???? Что это было?</span>
                    <span class="result">→ Светлый_Маг (❓ задаёт вопрос): Что это было?</span>
                    <button class="copy-btn" onclick="copyToClipboard('???? ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="command" data-category="Эмоции" data-search="^^^^ радость рад счастье восторг">
                    <div class="command-name">^^^^</div>
                    <div class="command-desc">Выражает радость, восторг или волнение. Показывает, что ваш персонаж счастлив или взволнован.</div>
                    <span class="example">^^^^ Наконец-то ты вернулся!</span>
                    <span class="result">→ Весёлый_Гном (☺ рад): Наконец-то ты вернулся!</span>
                    <button class="copy-btn" onclick="copyToClipboard('^^^^ ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="command" data-category="Эмоции" data-search="//// смущение смущен стыд стыдно">
                    <div class="command-name">////</div>
                    <div class="command-desc">Показывает смущение, застенчивость или неловкость персонажа.</div>
                    <span class="example">//// *краснеет* Я не знаю что сказать...</span>
                    <span class="result">→ Скромница (😳 смущён): *краснеет* Я не знаю что сказать...</span>
                    <button class="copy-btn" onclick="copyToClipboard('//// ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="command" data-category="Эмоции" data-search="++++ одобрение согласие поддержка да">
                    <div class="command-name">++++</div>
                    <div class="command-desc">Выражает одобрение, согласие или поддержку.</div>
                    <span class="example">++++ Это отличная идея!</span>
                    <span class="result">→ Оптимист (👍 одобряет): Это отличная идея!</span>
                    <button class="copy-btn" onclick="copyToClipboard('++++ ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="command" data-category="Эмоции" data-search="---- несогласие отказ отрицание нет">
                    <div class="command-name">----</div>
                    <div class="command-desc">Выражает несогласие, отказ или отрицание.</div>
                    <span class="example">---- Я не согласен с этим!</span>
                    <span class="result">→ Скептик (👎 отрицает): Я не согласен с этим!</span>
                    <button class="copy-btn" onclick="copyToClipboard('---- ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="command" data-category="Эмоции" data-search=">>>> срочно важно горячность горячо">
                    <div class="command-name">>>>></div>
                    <div class="command-desc">Показывает срочность, важность или горячность сообщения.</div>
                    <span class="example">>>>> Нам нужно действовать сейчас же!</span>
                    <span class="result">→ Лидер (🔥 говорит что-то срочное): Нам нужно действовать сейчас же!</span>
                    <button class="copy-btn" onclick="copyToClipboard('>>>> ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="command" data-category="Эмоции" data-search="<<<< усталость устал сонливость спать">
                    <div class="command-name"><<<<</div>
                    <div class="command-desc">Выражает усталость, сонливость или отсутствие энергии.</div>
                    <span class="example"><<<< *зевает* Я так устал...</span>
                    <span class="result">→ Усталый_Путник (😴 устал): *зевает* Я так устал...</span>
                    <button class="copy-btn" onclick="copyToClipboard('<<<< ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="command" data-category="Эмоции" data-search="** действие действия описание звездочки">
                    <div class="command-name">**действие</div>
                    <div class="command-desc">Позволяет описать действие вашего персонажа. Текст будет выделен жирным.</div>
                    <span class="example">**достаёт меч из ножен</span>
                    <span class="result">→ Воин: <b>достаёт меч из ножен</b></span>
                    <button class="copy-btn" onclick="copyToClipboard('** ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать префикс
                    </button>
                </div>
                
                <div class="tip">
                    💡 <strong>Совет:</strong> Вы можете комбинировать префиксы с обычным текстом для более выразительной ролевой игры. Например: "???? .... Что это за странный звук?"
                </div>
            </div>
        </div>
        
        <!-- Действия -->
        <div id="actions" class="tab-content">
            <div class="section">
                <h2>🤝 Взаимодействия между персонажами</h2>
                <p>Эти команды позволяют вашим персонажам взаимодействовать друг с другом в ролевой игре.</p>
                
                <div class="command" data-category="Действия" data-search="hug обнять объятия обнимашки">
                    <div class="command-name">/hug [ник]</div>
                    <div class="command-desc">Ваш персонаж обнимает другого персонажа. Можно использовать как для дружеских, так и для более эмоциональных объятий.</div>
                    <div class="command-usage">Можно добавить описание после ника, например: /hug Друг сильно</div>
                    <span class="example">/hug Светлый_Маг</span>
                    <span class="result">→ Тёмный_Лорд крепко обнимает Светлого_Мага, показывая неожиданную нежность</span>
                    <button class="copy-btn" onclick="copyToClipboard('/hug ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать команду
                    </button>
                </div>
                
                <div class="command" data-category="Действия" data-search="slap пощечина ударить шлепнуть бить">
                    <div class="command-name">/slap [ник]</div>
                    <div class="command-desc">Ваш персонаж даёт пощечину другому персонажу. Используется для выражения гнева, раздражения или как шутливый жест.</div>
                    <div class="command-usage">Можно указать причину: /slap Наглец за грубость</div>
                    <span class="example">/slap Наглый_Вор</span>
                    <span class="result">→ Светлый_Маг с силой бьёт Наглого_Вора по щеке, негодуя от его последних слов</span>
                    <div class="note">
                        <strong>Примечание:</strong> Пожалуйста, используйте эту команду только в рамках ролевой игры и с согласия других участников.
                    </div>
                    <button class="copy-btn" onclick="copyToClipboard('/slap ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать команду
                    </button>
                </div>
                
                <div class="command" data-category="Действия" data-search="kiss поцеловать поцелуй чмок любовь">
                    <div class="command-name">/kiss [ник]</div>
                    <div class="command-desc">Ваш персонаж целует другого персонажа. Можно использовать для романтических или дружеских поцелуев.</div>
                    <div class="command-usage">Можно уточнить куда: /kiss Возлюбленная в щёчку</div>
                    <span class="example">/kiss Возлюбленная</span>
                    <span class="result">→ Романтик нежно целует Возлюбленную, глядя ей в глаза</span>
                    <button class="copy-btn" onclick="copyToClipboard('/kiss ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать команду
                    </button>
                </div>
                
                <div class="command" data-category="Действия" data-search="punch удар кулак драка пунш">
                    <div class="command-name">/punch [ник]</div>
                    <div class="command-desc">Ваш персонаж бьёт другого персонажа кулаком. Используется для драк или жёстких взаимодействий.</div>
                    <div class="command-usage">Можно указать куда: /punch Злодей в живот</div>
                    <span class="example">/punch Злодей</span>
                    <span class="result">→ Боец со всей силы бьёт Злодея кулаком в лицо</span>
                    <div class="note">
                        <strong>Важно:</strong> Используйте эту команду только в рамках ролевой игры и с согласия других участников.
                    </div>
                    <button class="copy-btn" onclick="copyToClipboard('/punch ')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Копировать команду
                    </button>
                </div>
                
                <div class="tip">
                    💡 <strong>Совет:</strong> Вы можете добавлять к командам описания, чтобы сделать взаимодействия более выразительными. Например: "/hug Друг крепко, радуясь встрече"
                </div>
            </div>
        </div>
        
        <!-- Новости -->
        <div id="news" class="tab-content">
            <div class="section">
                <h2>📰 Последние новости и обновления</h2>
                
                <div class="news-item">
                    <h3>Версия 1.4 — Новые эмоции и команды</h3>
                    <p class="news-date">15 октября 2023</p>
                    <p>Мы рады представить новое обновление бота, которое включает:</p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li>3 новых эмоциональных префикса: <code>++++</code>, <code>----</code> и <code>>>></code></li>
                        <li>Команды взаимодействия между персонажами: <code>/hug</code>, <code>/slap</code>, <code>/kiss</code></li>
                        <li>Улучшенную систему ников (до 32 символов)</li>
                        <li>Исправление мелких ошибок</li>
                    </ul>
                </div>
                
                <div class="news-item">
                    <h3>Обновление системы ников</h3>
                    <p class="news-date">5 октября 2023</p>
                    <p>Теперь ники могут содержать до 32 символов и поддерживают больше специальных символов. Также исправлена проблема с отображением ников в мобильных приложениях.</p>
                </div>
                
                <div class="news-item">
                    <h3>Запуск бота в Telegram</h3>
                    <p class="news-date">28 сентября 2023</p>
                    <p>Наш бот теперь официально доступен в Telegram! Вы можете найти его по имени <code>(пока что не опубликован в общий доступ)</code> или через поиск по названию "".</p>
                </div>
            </div>
        </div>
        
        <!-- FAQ -->
        <div id="faq" class="tab-content">
            <div class="section">
                <h2>❓ Часто задаваемые вопросы</h2>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Как установить или изменить никнейм?</span>
                        <svg class="faq-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="faq-answer">
                        <p>Для установки или изменения никнейма используйте команду <code>/setnick [ваш_ник]</code>. Например:</p>
                        <span class="example">/setnick Тёмный_Лорд</span>
                        <p>Никнейм может содержать до 32 символов, включая пробелы и большинство специальных символов.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Как обратиться к другому игроку?</span>
                        <svg class="faq-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="faq-answer">
                        <p>Для обращения к другому игроку просто используйте его никнейм. Например:</p>
                        <span class="example">???? Светлый_Маг, что это было?</span>
                        <p class="note"><strong>Примечание:</strong> Упоминать можно только игроков, которые уже установили свой никнейм с помощью команды <code>/setnick</code>.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Почему моя команда не работает?</span>
                        <svg class="faq-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="faq-answer">
                        <p>Возможные причины:</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Вы не установили никнейм (используйте <code>/setnick</code>)</li>
                            <li>Команда содержит ошибки (проверьте правильность написания)</li>
                            <li>Вы пытаетесь упомянуть игрока, которого нет в базе</li>
                            <li>Бот временно недоступен (попробуйте позже)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFaq(this)">
                        <span>Как узнать список всех команд?</span>
                        <svg class="faq-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </div>
                    <div class="faq-answer">
                        <p>Вы можете просмотреть все команды:</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>В этом руководстве (разделы "Основные", "Эмоции", "Действия")</li>
                            <li>Отправив команду <code>/commands</code> в чате с ботом</li>
                            <li>Используя функцию поиска (кнопка 🔍 в правом нижнем углу)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        РП Бот • Версия 1.4 • © 2023 Все права защищены
    </footer>
    
    <!-- Модальное окно поиска -->
    <div class="search-modal" id="searchModal">
        <div class="search-modal-content">
            <div class="search-modal-header">
                <h3>🔍 Поиск по командам</h3>
                <button class="search-modal-close" onclick="closeSearchModal()">&times;</button>
            </div>
            <div class="search-modal-body">
                <input type="text" class="search-modal-input" id="searchModalInput" placeholder="Введите название команды или ключевое слово...">
                <div class="search-results" id="searchResults">
                    <div class="search-result-empty">Начните вводить запрос для поиска команд</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Виджет сообщений ВК -->
    <div id="vk_community_messages" class="vk-msg-widget"></div>
    
    <!-- Сообщение о копировании -->
    <div id="copiedMessage" class="copied-message">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 6L9 17l-5-5"></path>
        </svg>
        Скопировано в буфер обмена!
    </div>
    
    <script>
        // База данных пользователей (пример)
        const userDatabase = {
            "Светлый_Маг": true,
            "Тёмный_Лорд": true,
            "Весёлый_Гном": true,
            "Скромница": true,
            "Романтик": true,
            "Боец": true,
            "Лидер": true,
            "Усталый_Путник": true,
            "Оптимист": true,
            "Скептик": true
        };
        
        // Определение платформы
        function detectPlatform() {
            // Для ВКонтакте
            if (typeof VK !== 'undefined' && VK.WebApp) {
                document.getElementById('platformIndicator').textContent = 'VK';
                document.getElementById('platformIndicator').style.backgroundColor = '#5181B8';
                document.getElementById('vk-start-note').style.display = 'block';
                VK.WebApp.init();
                return 'vk';
            }
            // Для Telegram
            else if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                Telegram.WebApp.setHeaderColor('#2AABEE');
                Telegram.WebApp.setBackgroundColor('#F9F9F9');
                Telegram.WebApp.MainButton.hide();
                return 'telegram';
            }
            // Для браузера
            else {
                return 'web';
            }
        }
        
        // Переключение вкладок
        function openTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
            
            window.scrollTo(0, 0);
        }
        
        // Копирование текста
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showCopiedMessage();
            }).catch(err => {
                console.error('Не удалось скопировать: ', err);
            });
        }
        
        // Показать сообщение о копировании
        function showCopiedMessage() {
            const msg = document.getElementById('copiedMessage');
            msg.classList.add('visible');
            setTimeout(() => {
                msg.classList.remove('visible');
            }, 2000);
        }
        
        // Инициализация виджета ВК
        function initVKWidget() {
            if (typeof VK === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://vk.com/js/api/openapi.js?169';
                script.async = true;
                script.onload = function() {
                    VK.init({apiId: 1234567}); // Замените на ваш API ID
                    createVKWidget();
                };
                document.body.appendChild(script);
            } else {
                createVKWidget();
            }
        }
        
        // Создание виджета сообщений
        function createVKWidget() {
            VK.Widgets.CommunityMessages("vk_community_messages", 229888170, {
                expandTimeout: 5000,
                widgetPosition: "right",
                disableExpandChatSound: "1",
                tooltipButtonText: "Написать нам",
                buttonType: "blue_circle"
            });
        }
        
        // Переключение темы
        function toggleTheme() {
            const body = document.body;
            body.classList.toggle('dark-mode');
            
            const isDark = body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDark);
            
            // Изменение иконки
            const themeIcon = document.getElementById('themeIcon');
            if (isDark) {
                themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
            } else {
                themeIcon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>';
            }
        }
        
        // Проверка сохраненной темы
        function checkSavedTheme() {
            const savedTheme = localStorage.getItem('darkMode');
            if (savedTheme === 'true') {
                document.body.classList.add('dark-mode');
                const themeIcon = document.getElementById('themeIcon');
                themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
            }
        }
        
        // Поиск команд
        function searchCommands() {
            const searchTerm = document.getElementById('searchModalInput').value.toLowerCase().trim();
            const resultsContainer = document.getElementById('searchResults');
            
            if (!searchTerm) {
                resultsContainer.innerHTML = '<div class="search-result-empty">Начните вводить запрос для поиска команд</div>';
                return;
            }
            
            const commands = document.querySelectorAll('.command');
            let foundCount = 0;
            let resultsHTML = '';
            
            commands.forEach(cmd => {
                const searchData = cmd.getAttribute('data-search').toLowerCase();
                const category = cmd.getAttribute('data-category');
                const name = cmd.querySelector('.command-name').textContent;
                const desc = cmd.querySelector('.command-desc').textContent;
                
                if (searchData.includes(searchTerm) || name.toLowerCase().includes(searchTerm) || desc.toLowerCase().includes(searchTerm)) {
                    foundCount++;
                    resultsHTML += `
                        <div class="search-result-item" onclick="scrollToCommand('${cmd.id || ''}')">
                            <div class="search-result-category">${category}</div>
                            <div style="font-weight: 600;">${name}</div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">${desc}</div>
                        </div>
                    `;
                }
            });
            
            if (foundCount > 0) {
                resultsContainer.innerHTML = resultsHTML;
            } else {
                resultsContainer.innerHTML = '<div class="search-result-empty">Ничего не найдено. Попробуйте другой запрос.</div>';
            }
        }
        
        // Прокрутка к команде
        function scrollToCommand(cmdId) {
            if (cmdId) {
                const element = document.getElementById(cmdId);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth' });
                    element.style.animation = 'highlight 1.5s';
                    setTimeout(() => {
                        element.style.animation = '';
                    }, 1500);
                }
            }
            closeSearchModal();
        }
        
        // Открытие модального окна поиска
        function openSearchModal() {
            document.getElementById('searchModal').classList.add('active');
            document.getElementById('searchModalInput').focus();
        }
        
        // Закрытие модального окна поиска
        function closeSearchModal() {
            document.getElementById('searchModal').classList.remove('active');
            document.getElementById('searchModalInput').value = '';
            document.getElementById('searchResults').innerHTML = '<div class="search-result-empty">Начните вводить запрос для поиска команд</div>';
        }
        
        // Управление FAQ
        function toggleFaq(element) {
            const item = element.closest('.faq-item');
            item.classList.toggle('active');
        }
        
        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            const platform = detectPlatform();
            
            // Инициализируем виджет ВК для всех платформ
            initVKWidget();
            
            // Проверяем сохраненную тему
            checkSavedTheme();
            
            // Назначаем обработчики для кнопок
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('searchBtn').addEventListener('click', openSearchModal);
            
            // Назначаем обработчик для поиска
            document.getElementById('searchModalInput').addEventListener('input', searchCommands);
            
            // Адаптация под мобильные устройства
            if (window.innerWidth < 768) {
                document.body.style.fontSize = '15px';
            }
            
            // Добавляем анимацию для highlight
            const style = document.createElement('style');
            style.textContent = `
                @keyframes highlight {
                    0% { background-color: rgba(81, 129, 184, 0.1); }
                    100% { background-color: transparent; }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
