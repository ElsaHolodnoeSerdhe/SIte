<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Чат поддержки</title>
    <style>
        /* Основные стили */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        /* Стили для кнопки чата */
        .chat-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #07f;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 999;
        }
        
        .chat-button img {
            width: 30px;
            height: 30px;
        }
        
        /* Стили для контейнера чата */
        .chat-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            overflow: hidden;
            display: none;
            z-index: 1000;
        }
        
        /* Адаптация для мобильных */
        @media (max-width: 480px) {
            .chat-container {
                width: calc(100% - 40px);
                height: 70vh;
                right: 20px;
                bottom: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- Кнопка для открытия чата -->
    <div class="chat-button" id="chatButton">
        <img src="https://vk.com/images/icons/favicons/fav_logo.ico" alt="Чат поддержки">
    </div>

    <!-- Контейнер для виджета чата -->
    <div class="chat-container" id="chatContainer">
        <div id="vk_community_messages"></div>
    </div>

    <script>
        // ID вашего сообщества ВКонтакте (только цифры)
        const COMMUNITY_ID = 229889746; // ЗАМЕНИТЕ НА ВАШ ID
        
        // Функция загрузки VK API
        function loadVKWidget() {
            const script = document.createElement('script');
            script.src = 'https://vk.com/js/api/openapi.js?169';
            script.onload = function() {
                // Инициализация виджета сообщений
                VK.Widgets.CommunityMessages("vk_community_messages", COMMUNITY_ID, {
                    widgetPosition: "right",
                    disableNewMessagesSound: "0",
                    tooltipButtonText: "Написать нам",
                    buttonType: "primary",
                    expandTimeout: "0"
                });
            };
            document.body.appendChild(script);
        }
        
        // Управление видимостью чата
        document.getElementById('chatButton').addEventListener('click', function() {
            const container = document.getElementById('chatContainer');
            if (container.style.display === 'none') {
                container.style.display = 'block';
                // Показываем виджет только при первом открытии
                if (!window.vkWidgetLoaded) {
                    loadVKWidget();
                    window.vkWidgetLoaded = true;
                }
            } else {
                container.style.display = 'none';
            }
        });
        
        // Закрытие чата при клике вне его области
        document.addEventListener('click', function(e) {
            const container = document.getElementById('chatContainer');
            const button = document.getElementById('chatButton');
            
            if (container.style.display === 'block' && 
                !container.contains(e.target) && 
                e.target !== button) {
                container.style.display = 'none';
            }
        });
        
        // Загружаем виджет при открытии страницы
        window.addEventListener('load', function() {
            // Можно сразу загрузить виджет, если нужно
            // loadVKWidget();
        });
    </script>
</body>
</html>
